
- Task completed: Frontend / Habit Management - Render habit creation UI with a required name field.
- Decisions: inline creation card on Today page for now; save disabled when trimmed name empty; test script uses --passWithNoTests since no test files.
- Files changed: src/routes/index.tsx, package.json.
- Blockers/notes: vitest reports hanging process message after run.

- Task completed: Backend / Habit Management - Reject habit creation requests without a name.
- Decisions: add POST /api/habits handler with JSON parsing + trimmed name validation; return 201 with name only, no persistence yet.
- Files changed: src/routes/api/habits.ts, src/routeTree.gen.ts.
- Blockers/notes: vitest hanging process message persists after run.

- Task completed: Frontend / Habit Management - Allow reordering of habits via drag-and-drop.
- Decisions: HTML5 drag events with optimistic reorder; persist order via PATCH /api/habits; rollback on error; reuse error banner.
- Files changed: src/routes/index.tsx.
- Blockers/notes: vitest hanging process message persists after run.

- Task completed: Frontend / Daily Check-in - Allow user to undo a habit completion for the current day.
- Decisions: toggle completion in local state; keep button active with undo label and completed styling.
- Files changed: src/routes/index.tsx.
- Blockers/notes: vitest hanging process message persists after run.

- Task completed: Frontend / Habit Management - Display newly created habits in the Today list.
- Decisions: submit to /api/habits and render response into local habit list; prepend new habit; show empty/drag hints conditionally; add lightweight error state.
- Files changed: src/routes/index.tsx.
- Blockers/notes: vitest hanging process message persists after run.

- Task completed: Frontend / Daily Check-in - Allow user to complete a habit for the current day.
- Decisions: store completion state in local habit list; disable completion control once marked to avoid undo in this task scope.
- Files changed: src/routes/index.tsx.
- Blockers/notes: vitest hanging process message persists after run.

- Task completed: Backend / Habit Management - Persist habit order per user.
- Decisions: add habits table with sort order + user id; require auth session for habit CRUD; add GET/PATCH on /api/habits for ordered fetch and updates.
- Files changed: src/db/schema.ts, src/routes/api/habits.ts.
- Blockers/notes: vitest hanging process message persists after run.

- Task completed: Auth + DB plumbing - Enable email/password auth flow and apply habits table migration for local testing.
- Decisions: use absolute auth base URL on SSR and window origin on client; add habits migration and update journal for db:migrate.
- Files changed: src/lib/auth-client.ts, src/routes/index.tsx, drizzle/0001_create_habits.sql, drizzle/meta/_journal.json.
- Blockers/notes: none.

- Task completed: Backend / Daily Check-in - Remove or deactivate completion when undone.
- Decisions: add DELETE /api/completions with same payload validation + habit ownership check; return removed boolean after delete.
- Files changed: src/routes/api/completions.ts, prd.json.
- Blockers/notes: none.

- Task completed: Backend / Daily Check-in - Store a single completion per habit per local day.
- Decisions: create habit_completions table with unique (habit_id, completed_on); POST /api/completions expects habitId + localDate (YYYY-MM-DD), validates date, uses conflict-do-nothing to prevent duplicates.
- Files changed: src/db/schema.ts, src/routes/api/completions.ts, drizzle/0002_create_habit_completions.sql, drizzle/meta/_journal.json, prd.json.
- Blockers/notes: none.
